package com.kosmo.advance.ex;

public class S08Socket {
    /*

â–  ì¸í„°ë„·ê³¼ ì†Œì¼“ì—ì„œ ì´ìš©í•˜ëŠ” ì¸í„°ë„· ë§ê³¼ ì—°ê²°ì„± í†µì‹ 

â¸»

1. ì¸í„°ë„·ì´ë€?

ì¸í„°ë„·ì€ ì „ ì„¸ê³„ ìˆ˜ë§ì€ ì»´í“¨í„°ì™€ ì¥ì¹˜ë“¤ì„ ì—°ê²°í•˜ëŠ” ê±°ëŒ€í•œ ë„¤íŠ¸ì›Œí¬ì…ë‹ˆë‹¤.
ì´ë•Œ ì—°ê²°ì„ ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” ê±´ ë‹¨ìˆœí•œ ë¬¼ë¦¬ì  ì„ (ì¼€ì´ë¸”)ë§Œì´ ì•„ë‹ˆë¼, **ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ëŠ” ê·œì¹™(í”„ë¡œí† ì½œ)**ê³¼ **í†µì‹  êµ¬ì¡°(ëª¨ë¸)**ë„ í¬í•¨ë©ë‹ˆë‹¤.

â¸»

2. ì´ ì—°ê²°ì€ ì–´ë–¤ ë§ì„ í†µí•´ ì´ë£¨ì–´ì§ˆê¹Œ?

ì¸í„°ë„·ì´ë¼ëŠ” ê±°ëŒ€í•œ ë§ì€ ì—¬ëŸ¬ ì¢…ë¥˜ì˜ **ë„¤íŠ¸ì›Œí¬(Network)**ë“¤ì´ ì—°ê²°ë˜ì–´ ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤. ëŒ€í‘œì ì¸ ë§ êµ¬ì¡°ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:
	â€¢	LAN (Local Area Network)
        ì§‘, í•™êµ, ì‚¬ë¬´ì‹¤ ë“±ì—ì„œ ì‚¬ìš©í•˜ëŠ” ê·¼ê±°ë¦¬ í†µì‹ ë§ì…ë‹ˆë‹¤.
        ì˜ˆ: ê°™ì€ ê³µìœ ê¸°ì— ì—°ê²°ëœ ë…¸íŠ¸ë¶ê³¼ í”„ë¦°í„°
	â€¢	WAN (Wide Area Network)
        LANì„ ì„œë¡œ ì—°ê²°í•œ ê´‘ì—­ í†µì‹ ë§ìœ¼ë¡œ, ì¸í„°ë„·ë„ WANì˜ ì¼ì¢…ì…ë‹ˆë‹¤.
        ì˜ˆ: ì„œìš¸ê³¼ ë¶€ì‚°ì˜ ë‘ ê¸°ì—… ì„œë²„ ê°„ ì—°ê²°
	â€¢	ISP ë§ (KT, SK ë“±)
        LANê³¼ WANì„ ì—°ê²°ì‹œì¼œì£¼ëŠ” ì¸í„°ë„· ì„œë¹„ìŠ¤ ì œê³µìì˜ ë„¤íŠ¸ì›Œí¬ì…ë‹ˆë‹¤.

â¸»

3. ì´ëŸ° ë„¤íŠ¸ì›Œí¬ ê°„ì— ì‹¤ì œ ì—°ê²°ì€ ì–´ë–»ê²Œ ì´ë£¨ì–´ì§ˆê¹Œ?

**ì—°ê²°ì„±(Connectivity)**ì€ ë‘ ì¥ì¹˜(í˜¹ì€ í”„ë¡œê·¸ë¨)ê°€ ì„œë¡œ ë°ì´í„°ë¥¼ ì†¡ìˆ˜ì‹ í•  ìˆ˜ ìˆëŠ” ìƒíƒœë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ì´ ì—°ê²°ì„±ì„ ìœ„í•´ì„œëŠ” ë‹¤ìŒ 3ê°€ì§€ ìš”ì†Œê°€ í•„ìš”í•©ë‹ˆë‹¤:
    â€¢	IP ì£¼ì†Œ
        ê° ì¥ì¹˜ì˜ ë„¤íŠ¸ì›Œí¬ ìƒ ì£¼ì†Œ (ì „í™”ë²ˆí˜¸ì²˜ëŸ¼ ê³ ìœ í•¨)
    â€¢	í¬íŠ¸ ë²ˆí˜¸
        í•œ ì»´í“¨í„° ë‚´ì—ì„œ ì—¬ëŸ¬ í”„ë¡œê·¸ë¨ì„ êµ¬ë¶„í•˜ê¸° ìœ„í•œ ë²ˆí˜¸
    â€¢	í”„ë¡œí† ì½œ(Protocol)
        ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ëŠ” ì•½ì† (ì˜ˆ: TCP, UDP)

â¸»

4. ì†Œì¼“(Socket)ì´ë€?

â€œì†Œì¼“ì€ IPì™€ í¬íŠ¸ë¥¼ ì´ìš©í•´ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ ë§ºê³ , ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ì„ ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” í”„ë¡œê·¸ë˜ë° ì¸í„°í˜ì´ìŠ¤(í˜¹ì€ API)ì…ë‹ˆë‹¤.â€
**API (Application Programming Interface) í”„ë¡œê·¸ë¨ê³¼ í”„ë¡œê·¸ë¨ ì‚¬ì´ì˜ ì•½ì†ëœ ì‚¬ìš© ë°©ë²• ì…ë‹ˆë‹¤.

ì‰½ê²Œ ë§í•´:
	â€¢	ë„¤íŠ¸ì›Œí¬ë¼ëŠ” ë„ë¡œê°€ ìˆê³ 
	â€¢	IPì™€ í¬íŠ¸ë¼ëŠ” ì§‘ì£¼ì†Œê°€ ìˆë‹¤ë©´
	â€¢	ì†Œì¼“ì€ ê·¸ ì§‘ì—ì„œ ì†ë‹˜(ë°ì´í„°)ì„ ì£¼ê³ ë°›ëŠ” ë¬¸ ì—­í• ì…ë‹ˆë‹¤.

ì¦‰, ì†Œì¼“ì€ ì¸í„°ë„·ë§(LAN/WAN)ì„ í†µí•´ ì—°ê²°ëœ ì¥ì¹˜ ê°„ì˜ í†µì‹ ì„ ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” ì—°ê²°ì ì…ë‹ˆë‹¤.

â¸»

5. ì†Œì¼“ì€ ì–´ë–»ê²Œ í†µì‹ í•˜ëŠ”ê°€?

ì†Œì¼“ì€ ë‘ ê°€ì§€ ë°©ì‹ìœ¼ë¡œ í†µì‹ í•©ë‹ˆë‹¤.
ì´ê±´ ê²°êµ­ ì „ì†¡ ë°©ì‹ì˜ ì°¨ì´, ì¦‰ TCPëƒ UDPëƒë¡œ ë‚˜ë‰˜ê²Œ ë©ë‹ˆë‹¤.

- TCP ì†Œì¼“ (ì—°ê²°ì§€í–¥í˜•)
	â€¢	ë°ì´í„°ë¥¼ ë³´ë‚´ê¸° ì „ì— ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ê°€ ë¨¼ì € ì—°ê²°ì„ ë§ºìŒ
	â€¢	ì‹ ë¢°ì„± ìˆëŠ” ì „ì†¡ (ë°ì´í„° ì†ì‹¤/ìˆœì„œ ì˜¤ë¥˜ ì—†ìŒ)
	â€¢	ì˜ˆ: ì›¹ ë¸Œë¼ìš°ì§•, íŒŒì¼ ì „ì†¡

- UDP ì†Œì¼“ (ë¹„ì—°ê²°ì§€í–¥í˜•)
	â€¢	ì—°ê²° ì—†ì´ ë°”ë¡œ ë°ì´í„° ì „ì†¡
	â€¢	ë¹ ë¥´ì§€ë§Œ ì‹ ë¢°ì„± ë‚®ìŒ
	â€¢	ì˜ˆ: ê²Œì„, ìŠ¤íŠ¸ë¦¬ë°, ì‹¤ì‹œê°„ ì±„íŒ…

â¸»

6. ì´ ëª¨ë“  í†µì‹ ì€ ì–´ë–¤ êµ¬ì¡°ë¡œ ì´ë£¨ì–´ì§ˆê¹Œ?

ì†Œì¼“ì€ ì‹¤ì œë¡œëŠ” TCP/IP í”„ë¡œí† ì½œ ìŠ¤íƒ(4ê³„ì¸µ) ìœ„ì—ì„œ ë™ì‘í•©ë‹ˆë‹¤.
	â€¢	ì‘ìš© ê³„ì¸µ: HTTP, FTP ë“± (ìš°ë¦¬ê°€ ë§Œë“  ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œ)
	â€¢	ì „ì†¡ ê³„ì¸µ: TCP/UDP (ì†Œì¼“ í†µì‹ ì´ ì—¬ê¸°ì— í•´ë‹¹)
	â€¢	ì¸í„°ë„· ê³„ì¸µ: IP (ì£¼ì†Œì™€ ë¼ìš°íŒ…)
	â€¢	ë„¤íŠ¸ì›Œí¬ ê³„ì¸µ: Ethernet, Wi-Fi ë“± (ë¬¼ë¦¬ ì „ì†¡)

â†’ ìš°ë¦¬ê°€ ì†Œì¼“ì„ ì´ìš©í•´ ë°ì´í„°ë¥¼ ë³´ë‚¼ ë•Œ ì‹¤ì œë¡œëŠ” ì´ ê³„ì¸µë“¤ì„ ë”°ë¼ ë„¤íŠ¸ì›Œí¬ë¥¼ íƒ€ê³  ê°€ëŠ” ê²ë‹ˆë‹¤.

â¸»

7. ì˜ˆì‹œë¡œ ë³´ëŠ” ì „ì²´ íë¦„

ë‚´ê°€ ë§Œë“  ì±„íŒ… í”„ë¡œê·¸ë¨(í´ë¼ì´ì–¸íŠ¸)ì´ ìƒëŒ€ë°© ì»´í“¨í„°(ì„œë²„)ì™€ ë©”ì‹œì§€ë¥¼ ì£¼ê³ ë°›ëŠ” ê²½ìš°:

	â€¢	ì¸í„°ë„·ì— ì—°ê²°ëœ LAN í™˜ê²½ì—ì„œ (ì˜ˆ: ì™€ì´íŒŒì´)
	â€¢	ìƒëŒ€ë°©ì˜ IPì™€ í¬íŠ¸ë¥¼ ì´ìš©í•´ ì†Œì¼“ìœ¼ë¡œ ì—°ê²°ì„ ì‹œë„
	â€¢	TCP ì†Œì¼“ì„ í†µí•´ ì•ˆì „í•œ ì—°ê²° ìˆ˜ë¦½ (3-way handshake)
	â€¢	ì—°ê²°ë˜ë©´ ë©”ì‹œì§€ë¥¼ InputStream/OutputStreamìœ¼ë¡œ ì£¼ê³ ë°›ìŒ
	â€¢	ì—°ê²° ì¢…ë£Œ ì‹œ ì†Œì¼“ close()

â¸»

â–  3-Way Handshakeë€?
TCP í†µì‹ ì—ì„œ í´ë¼ì´ì–¸íŠ¸ì™€ ì„œë²„ê°€ ì—°ê²°ì„ ì‹œì‘í•  ë•Œ ì„œë¡œì˜ ì—°ê²° ê°€ëŠ¥ì„±ì„ í™•ì¸í•˜ê³  ì•ˆì •ì ì¸ í†µì‹ ì„ ì•½ì†í•˜ê¸° ìœ„í•œ ì ˆì°¨ì…ë‹ˆë‹¤.
ì¦‰, ë°ì´í„°ë¥¼ ë³´ë‚´ê¸° ì „ì— **â€œì—°ê²°í•  ì¤€ë¹„ê°€ ë˜ì—ˆëŠ”ì§€ ì„œë¡œ í™•ì¸í•˜ê³  í•©ì˜í•˜ëŠ” ê³¼ì •â€**ì…ë‹ˆë‹¤.
â¸»
â–  ê·¸ë¦¼ìœ¼ë¡œ í‘œí˜„

[Client]                              [Server]
   | --------- SYN  (ì‹œì‘ ìš”ì²­) --------> |  SYN_SENT : í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— â€œì ‘ì† ìš”ì²­í•©ë‹ˆë‹¤!â€
   |                                     |
   | <---- SYN + ACK (ìˆ˜ë½ + ì‹œì‘ìš”ì²­) -- | SYN_RECEIVED : ì„œë²„ê°€ ìš”ì²­ì„ ìˆ˜ë½í•˜ë©° ì‘ë‹µì„ ë³´ëƒ…ë‹ˆë‹¤  â€œê·¸ë˜, ì ‘ì†í•  ì¤€ë¹„ ëì–´. ë„ˆ ì¤€ë¹„ëë‹ˆ?â€
   |                                     |
   | --------- ACK (ìˆ˜ë½) -------------> | All ESTABLISHED :í´ë¼ì´ì–¸íŠ¸ê°€ â€œì‘, ë‚˜ë„ ì¤€ë¹„ ì™„ë£Œ!â€ë¼ê³  ì‘ë‹µ
   |                                     |
[ì—°ê²° ì™„ë£Œ]                       [ì—°ê²° ì™„ë£Œ]



â–  ìë°”ì™€ì˜ ì—°ê²°

ìë°”ì—ì„œ TCP ì†Œì¼“ì„ ì´ìš©í•  ë•Œ Socket ë˜ëŠ” ServerSocketì„ ì‚¬ìš©í•˜ë©´ ë‚´ë¶€ì ìœ¼ë¡œ ì´ 3-way handshakeê°€ ìë™ìœ¼ë¡œ ìˆ˜í–‰ë©ë‹ˆë‹¤.

// ì„œë²„
ServerSocket server = new ServerSocket(9999);
Socket clientSocket = server.accept();  // ì—¬ê¸°ì„œ handshake ì‹œì‘ë¨

// í´ë¼ì´ì–¸íŠ¸
Socket socket = new Socket("192.168.0.10", 9999);  // ì—¬ê¸°ì„œ SYN ìš”ì²­ì´ ë°œìƒ

â†’ ìš°ë¦¬ê°€ ì½”ë“œë¥¼ ì‘ì„±í•˜ì§€ ì•Šì•„ë„,
â†’ ì†Œì¼“ ê°ì²´ ìƒì„± ìˆœê°„ì— ì´ë¯¸ 3-way handshakeë¥¼ í†µí•´ ì—°ê²°ì´ ì„±ë¦½ëœ ê²ƒì…ë‹ˆë‹¤.

â¸»

â–  ìš”ì•½ ì •ë¦¬

1ë‹¨ê³„: í´ë¼ì´ì–¸íŠ¸ â†’ ì„œë²„    (SYN)       â†’ ì—°ê²° ìš”ì²­
2ë‹¨ê³„: ì„œë²„ â†’ í´ë¼ì´ì–¸íŠ¸    (SYN + ACK) â†’ ìš”ì²­ ìˆ˜ë½ + ì—°ê²° ìš”ì²­
3ë‹¨ê³„: í´ë¼ì´ì–¸íŠ¸ â†’ ì„œë²„    (ACK)       â†’ ì—°ê²° ìˆ˜ë½

â†’ ì–‘ìª½ì´ ëª¨ë‘ ì—°ê²°ë˜ì—ˆìŒì„ í™•ì • â†’ ë°ì´í„° ì†¡ìˆ˜ì‹  ê°€ëŠ¥


â¸»

â–  ìš”ì•½
	â€¢	ì¸í„°ë„· ë§ì€ LAN/WAN/ISP ë“±ì˜ êµ¬ì¡°ë¡œ ì´ë£¨ì–´ì§€ë©°, ì¥ì¹˜ë“¤ì€ IP/Port/Protocolë¡œ ì—°ê²°ë©ë‹ˆë‹¤.
	â€¢	ì†Œì¼“ì€ ì´ëŸ° ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„±ì„ í™œìš©í•˜ì—¬ ë‘ í”„ë¡œê·¸ë¨ ê°„ ë°ì´í„° í†µì‹ ì„ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤.
	â€¢	ì†Œì¼“ í†µì‹ ì€ TCP/UDP ë°©ì‹ì— ë”°ë¼ ë‹¤ë¥´ë©°, ëª¨ë‘ TCP/IP ë„¤íŠ¸ì›Œí¬ ëª¨ë¸ ê¸°ë°˜ì—ì„œ ë™ì‘í•©ë‹ˆë‹¤.
	â€¢	ê²°êµ­ ì†Œì¼“ì€ ì¸í„°ë„· ê¸°ë°˜ ë„¤íŠ¸ì›Œí¬ë¥¼ í™œìš©í•œ í”„ë¡œê·¸ë˜ë° ë°©ì‹ ì¤‘ ê°€ì¥ ê¸°ë³¸ì ì´ë©° ì¤‘ìš”í•œ ì—°ê²° ìˆ˜ë‹¨ì…ë‹ˆë‹¤.

â¸»


â–  ì™œ ìš°ë¦¬ê°€ ë§Œë“œëŠ” ìë°” ì†Œì¼“ì€ LAN í™˜ê²½ì—ì„œë§Œ ì—°ê²°ë˜ëŠ”ê°€?

â¸»

1. ìš°ë¦¬ê°€ ë§Œë“  ìë°” ì†Œì¼“ í”„ë¡œê·¸ë¨ì€ ì–´ë””ì—ì„œ ì‹¤í–‰ë˜ëŠ”ê°€?
	â€¢	ì˜ˆ: ServerSocket server = new ServerSocket(9999);
	â€¢	ì´ ë§ì€ ë‚´ ì»´í“¨í„°ì˜ IPì£¼ì†Œ:9999 í¬íŠ¸ë¥¼ ì—´ì–´ë‘ê³  ê¸°ë‹¤ë¦¬ê² ë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.

    ê·¸ëŸ°ë° ì´ IP ì£¼ì†Œê°€ ì–´ë–¤ IPëƒì— ë”°ë¼ ì—°ê²° ê°€ëŠ¥ì„±ì´ ë‹¬ë¼ì§‘ë‹ˆë‹¤.

â¸»

2. LAN í™˜ê²½ì—ì„œëŠ” ë‚´ë¶€ IPë¡œ ì—°ê²°ì´ ëœë‹¤

â–¸ LANì—ì„œëŠ” ì¼ë°˜ì ìœ¼ë¡œ ì´ëŸ° IPë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤:
	â€¢	192.168.x.x
	â€¢	10.x.x.x
	â€¢	172.16.x.x ~ 172.31.x.x

    ì´ëŸ¬í•œ IPë“¤ì€ **ì‚¬ì„¤ IP(Private IP)**ë¼ê³  ë¶ˆë¦¬ë©°, ê³µìœ ê¸° ì•ˆì—ì„œë§Œ í†µì‹ ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.
    ì¦‰, ê°™ì€ ê³µìœ ê¸°ë‚˜ ì™€ì´íŒŒì´ì— ì—°ê²°ëœ ê¸°ê¸°ë“¤ë¼ë¦¬ëŠ”
    â†’ ì„œë¡œì˜ ì‚¬ì„¤ IP ì£¼ì†Œë¥¼ í†µí•´ ì§ì ‘ í†µì‹ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

    ê·¸ë˜ì„œ LAN í™˜ê²½ì—ì„œëŠ” ì†Œì¼“ ì—°ê²°ì´ ì˜ ë©ë‹ˆë‹¤.

â¸»

3. í•˜ì§€ë§Œ ì™¸ë¶€ì—ì„œ ì ‘ì†í•˜ë ¤ê³  í•˜ë©´ ë¬¸ì œê°€ ìƒê¸´ë‹¤

â–¸ ì¸í„°ë„·ì—ì„œ ì—°ê²°í•˜ë ¤ë©´ **ê³µì¸ IP(Public IP)**ê°€ í•„ìš”í•©ë‹ˆë‹¤.
	â€¢	ì™¸ë¶€ ì»´í“¨í„°ëŠ” ìš°ë¦¬ ì§‘ ê³µìœ ê¸°ì˜ ë‚´ë¶€ ì‚¬ì„¤ IPë¥¼ ëª¨ë¦…ë‹ˆë‹¤.
	â€¢	ì‹¬ì§€ì–´ ì‚¬ì„¤ IPëŠ” ì¸í„°ë„· ë§ì—ì„œ ì ‘ê·¼ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤. â†’ ê·¸ë˜ì„œ ì™¸ë¶€ì—ì„œëŠ” ì„œë²„ì— ì§ì ‘ ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

â¸»

4. ì™œ ê·¸ëŸ´ê¹Œ? NATì™€ ë°©í™”ë²½ì´ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤

â–¸ NAT (Network Address Translation)
	â€¢	ê³µìœ ê¸°ì—ëŠ” ê³µì¸ IP í•˜ë‚˜ë§Œ ìˆê³ , ë‚´ë¶€ì—ì„œëŠ” ì—¬ëŸ¬ ì‚¬ì„¤ IPë¥¼ ì”ë‹ˆë‹¤.
	â€¢	NATëŠ” ì™¸ë¶€ë¡œ ë‚˜ê°€ëŠ” ìš”ì²­ì€ ë²ˆì—­í•´ì£¼ì§€ë§Œ, ì™¸ë¶€ì—ì„œ ë“¤ì–´ì˜¤ëŠ” ìš”ì²­ì€ í—ˆìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
	â€¢	ì¦‰, ì™¸ë¶€ í´ë¼ì´ì–¸íŠ¸ê°€ 192.168.0.10:9999ë¡œ ì§ì ‘ ì ‘ê·¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

â–¸ ë°©í™”ë²½
	â€¢	ìš´ì˜ì²´ì œ ë˜ëŠ” ê³µìœ ê¸° ìì²´ì—ì„œ ì™¸ë¶€ ì ‘ê·¼ì„ ë§‰ê³  ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
	â€¢	ì„œë²„ í¬íŠ¸ë¥¼ ì™¸ë¶€ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ ì—´ì–´ì£¼ì§€ ì•Šìœ¼ë©´ ì—°ê²°ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

â¸»

5. ê·¸ë˜ì„œ LANì´ ì•„ë‹ˆë©´ ìë°” ì†Œì¼“ í†µì‹ ì´ ë§‰íˆëŠ” ê²ƒì´ë‹¤

ê¸°ë³¸ì ìœ¼ë¡œ ìë°” ì†Œì¼“ì€ IP ì£¼ì†Œì™€ í¬íŠ¸ë¡œë§Œ ì—°ê²°í•˜ë ¤ê³  ì‹œë„í•©ë‹ˆë‹¤.
ì´ ì£¼ì†Œê°€ ì‚¬ì„¤ IPì´ê³ , NATë‚˜ ë°©í™”ë²½ì— ì˜í•´ ë§‰í˜€ ìˆë‹¤ë©´ ì™¸ë¶€ì—ì„œëŠ” ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

â¸»

6. í•´ê²° ë°©ë²•ì€ ë¬´ì—‡ì¸ê°€?

1) í¬íŠ¸ í¬ì›Œë”©(Port Forwarding)
	â€¢	ê³µìœ ê¸° ì„¤ì •ì—ì„œ 9999 í¬íŠ¸ë¥¼ ë‚´ë¶€ IP(ì˜ˆ: 192.168.0.10)ì— ë§¤í•‘
	â€¢	ì™¸ë¶€ì—ì„œ ê³µì¸IP:9999ë¡œ ì ‘ê·¼í•˜ë©´ NATê°€ ë‚´ë¶€ ì„œë²„ë¡œ ì—°ê²°í•´ì¤Œ

2) ê³µì¸ ì„œë²„ ì‚¬ìš©
	â€¢	AWS, í´ë¼ìš°ë“œ ì„œë²„, ì™¸ë¶€ ê³µì¸ IPë¥¼ ê°€ì§„ ì„œë²„ë¥¼ ì‚¬ìš©
	â€¢	ì„œë²„ê°€ ê³µì¸ IPë¥¼ ê°€ì§€ë¯€ë¡œ ëˆ„êµ¬ë“  ì ‘ê·¼ ê°€ëŠ¥

3) í„°ë„ë§ ì„œë¹„ìŠ¤ í™œìš© (ì˜ˆ: ngrok)
	â€¢	ë‚´ ë¡œì»¬ì—ì„œ í…ŒìŠ¤íŠ¸í•  ë•Œ ngrokìœ¼ë¡œ ì™¸ë¶€ì— í¬íŠ¸ë¥¼ ì„ì‹œë¡œ ì—´ ìˆ˜ ìˆìŒ

â¸»

7. ê²°ë¡ 
	â€¢	LAN ì•ˆì—ì„œëŠ” ì‚¬ì„¤ IP ê¸°ë°˜ìœ¼ë¡œ ì†Œì¼“ í†µì‹ ì´ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— ë¬¸ì œê°€ ì—†ìŒ
	â€¢	ê·¸ëŸ¬ë‚˜ LAN ë°–ì—ì„œëŠ” ê³µìœ ê¸°, NAT, ë°©í™”ë²½ ë•Œë¬¸ì— ì§ì ‘ ì ‘ì†ì´ ì°¨ë‹¨ë¨
	â€¢	ì´ë¥¼ í•´ê²°í•˜ë ¤ë©´ ê³µì¸ IP í™•ë³´, í¬íŠ¸ í¬ì›Œë”©, ì„œë²„ í˜¸ìŠ¤íŒ… ë“±ì˜ ì¡°ì¹˜ê°€ í•„ìš”í•¨

â¸»


â–  ë‚´ ì»´í“¨í„°ì˜ IP ì£¼ì†Œ í™•ì¸ ë°©ë²• (OSX, Windows)

â¸»

- IP ì£¼ì†Œë€?

IP ì£¼ì†ŒëŠ” ë„¤íŠ¸ì›Œí¬ ìƒì—ì„œ ë‚´ ì»´í“¨í„°ë¥¼ ì‹ë³„í•˜ëŠ” ê³ ìœ í•œ ì£¼ì†Œì…ë‹ˆë‹¤.
ë³´í†µ ë‘ ì¢…ë¥˜ê°€ ìˆìŠµë‹ˆë‹¤:
	â€¢	ê³µì¸ IP (Public IP): ì¸í„°ë„· ì „ì²´ì—ì„œ ê³ ìœ í•œ ì£¼ì†Œ. ISPì—ì„œ ë¶€ì—¬.
	â€¢	ì‚¬ì„¤ IP (Private IP): ê³µìœ ê¸° ë‚´ë¶€ì—ì„œë§Œ ì“°ì´ëŠ” ì£¼ì†Œ (ex. 192.168.x.x)

â¸»

1. **macOS (OSX)**ì—ì„œ IP í™•ì¸ ë°©ë²•

â–¸ ë°©ë²• 1: ì‹œìŠ¤í…œ í™˜ê²½ì„¤ì •ì—ì„œ í™•ì¸ (GUI)
	1.	ìƒë‹¨ ë©”ë‰´ë°” > Apple ë¡œê³  í´ë¦­ â†’ ì‹œìŠ¤í…œ ì„¤ì •
	2.	ë„¤íŠ¸ì›Œí¬(Network) í´ë¦­
	3.	ì‚¬ìš© ì¤‘ì¸ ë„¤íŠ¸ì›Œí¬(Wi-Fi ë˜ëŠ” ìœ ì„ )ë¥¼ ì„ íƒ
	4.	ì˜¤ë¥¸ìª½ì— IP ì£¼ì†Œê°€ í‘œì‹œë¨ (ì˜ˆ: 192.168.0.15)

â¸»

â–¸ ë°©ë²• 2: í„°ë¯¸ë„ì—ì„œ í™•ì¸ (CLI)
	1.	í„°ë¯¸ë„ ì‹¤í–‰ (Spotlightì—ì„œ terminal ê²€ìƒ‰)
	2.	ì•„ë˜ ëª…ë ¹ì–´ ì…ë ¥:
        ipconfig getifaddr en0    # Wi-Fi ì‚¬ìš© ì‹œ
        ipconfig getifaddr en1    # ìœ ì„  LAN ì‚¬ìš© ì‹œ (ë³´í†µì€ en1ì´ê±°ë‚˜ en2)
	3.	ì¶œë ¥ëœ IP ì£¼ì†Œê°€ í˜„ì¬ ì‚¬ì„¤ IP ì£¼ì†Œì…ë‹ˆë‹¤.

â€» ì „ì²´ ì •ë³´ í™•ì¸: ifconfig

â¸»

2. Windowsì—ì„œ IP í™•ì¸ ë°©ë²•

â–¸ ë°©ë²• 1: ì„¤ì •(GUI)ì—ì„œ í™•ì¸
	1.	ì‹œì‘ ë©”ë‰´ > ì„¤ì • > ë„¤íŠ¸ì›Œí¬ ë° ì¸í„°ë„·
	2.	ì¢Œì¸¡ ë©”ë‰´ì—ì„œ Wi-Fi ë˜ëŠ” ì´ë”ë„· ì„ íƒ
	3.	ì‚¬ìš© ì¤‘ì¸ ë„¤íŠ¸ì›Œí¬ í´ë¦­
	4.	ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤ â†’ ì†ì„±ì—ì„œ IP ì£¼ì†Œ í™•ì¸ (ì˜ˆ: 192.168.0.23)

â¸»

â–¸ ë°©ë²• 2: ëª…ë ¹ í”„ë¡¬í”„íŠ¸(CLI)ì—ì„œ í™•ì¸
	1.	Windows + R â†’ cmd ì…ë ¥ í›„ ì‹¤í–‰
	2.	ëª…ë ¹ì–´ ì…ë ¥:

ipconfig

	3.	ì¶œë ¥ ë‚´ìš© ì¤‘ì—ì„œ:
	â€¢	IPv4 ì£¼ì†Œ: 192.168.x.x í˜•ì‹ (ë‚´ ì»´í“¨í„°ì˜ ì‚¬ì„¤ IP)
	â€¢	ê¸°ë³¸ ê²Œì´íŠ¸ì›¨ì´: ê³µìœ ê¸° ì£¼ì†Œ

â¸»

3. ê³µì¸ IP ì£¼ì†Œ í™•ì¸ ë°©ë²• (ê³µí†µ)

LAN ì™¸ë¶€ì—ì„œ ë³´ì´ëŠ” ê³µì¸ IP ì£¼ì†Œë¥¼ í™•ì¸í•˜ë ¤ë©´:

â–¸ ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì•„ë˜ ì‚¬ì´íŠ¸ ì ‘ì†:
	â€¢	https://whatismyipaddress.com
	â€¢	https://ip.pe.kr (í•œêµ­ì–´)

ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ì†í•˜ë©´ í˜„ì¬ ì‚¬ìš©í•˜ëŠ” ê³µì¸ IPê°€ ë°”ë¡œ í‘œì‹œë©ë‹ˆë‹¤.

â¸»



ì¢‹ì•„ìš”! ìë°”ë¡œ TCP ì†Œì¼“ì„ ì‚¬ìš©í•œ ì±„íŒ…ë°©ì„ ë§Œë“¤ ë•Œ, ê¸°ë³¸ì ìœ¼ë¡œëŠ” ì•„ë˜ êµ¬ì¡°ë¡œ ë‚˜ë‰©ë‹ˆë‹¤:

â¸»

ğŸ”— ê¸°ë³¸ êµ¬ì¡°
	â€¢	ì„œë²„(Server)
â†’ ì—¬ëŸ¬ í´ë¼ì´ì–¸íŠ¸ì˜ ì ‘ì†ì„ ë°›ê³ , ë©”ì‹œì§€ë¥¼ ì¤‘ê³„í•¨ (ì¤‘ì•™ ì—­í• )
	â€¢	í´ë¼ì´ì–¸íŠ¸(Client)
â†’ ì„œë²„ì— ì ‘ì†í•´ì„œ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ê³  ë°›ìŒ

â¸»

ğŸ“¦ ê¸°ë³¸ ì˜ˆì‹œ ì½”ë“œ (Java TCP ì†Œì¼“)

â¸»

1. ì„œë²„ ì½”ë“œ (ChatServer.java)

import java.io.*;
import java.net.*;
import java.util.*;

public class ChatServer {
    static List<Socket> clientList = new ArrayList<>();

    public static void main(String[] args) throws IOException {
        ServerSocket server = new ServerSocket(9999);
        System.out.println("ì„œë²„ ì‹œì‘ë¨...");

        while (true) {
            Socket client = server.accept();
            clientList.add(client);
            System.out.println("ìƒˆ í´ë¼ì´ì–¸íŠ¸ ì ‘ì†: " + client.getInetAddress());

            // í´ë¼ì´ì–¸íŠ¸ë§ˆë‹¤ ì“°ë ˆë“œë¡œ ì²˜ë¦¬
            new ClientHandler(client).start();
        }
    }

    // í´ë¼ì´ì–¸íŠ¸ ë‹´ë‹¹ ì“°ë ˆë“œ
    static class ClientHandler extends Thread {
        Socket socket;
        BufferedReader in;

        public ClientHandler(Socket socket) {
            this.socket = socket;
            try {
                in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
            } catch (IOException e) {
                e.printStackTrace();
            }
        }

        public void run() {
            try {
                String msg;
                while ((msg = in.readLine()) != null) {
                    System.out.println("ë°›ì€ ë©”ì‹œì§€: " + msg);
                    broadcast(msg);
                }
            } catch (IOException e) {
                System.out.println("í´ë¼ì´ì–¸íŠ¸ ì—°ê²° ëŠê¹€: " + socket.getInetAddress());
            } finally {
                try {
                    clientList.remove(socket);
                    socket.close();
                } catch (IOException e) {}
            }
        }

        // ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë©”ì‹œì§€ ì „ì†¡
        void broadcast(String msg) throws IOException {
            for (Socket s : clientList) {
                OutputStream os = s.getOutputStream();
                PrintWriter pw = new PrintWriter(os, true);
                pw.println(msg);
            }
        }
    }
}


â¸»

2. í´ë¼ì´ì–¸íŠ¸ ì½”ë“œ (ChatClient.java)

import java.io.*;
import java.net.*;

public class ChatClient {
    public static void main(String[] args) throws IOException {
        Socket socket = new Socket("localhost", 9999);
        System.out.println("ì„œë²„ì— ì—°ê²°ë¨");

        // ë©”ì‹œì§€ ìˆ˜ì‹  ì“°ë ˆë“œ
        new Thread(() -> {
            try {
                BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
                String msg;
                while ((msg = in.readLine()) != null) {
                    System.out.println("ë°›ì€ ë©”ì‹œì§€: " + msg);
                }
            } catch (IOException e) {
                System.out.println("ì„œë²„ ì—°ê²° ëŠê¹€");
            }
        }).start();

        // ë©”ì‹œì§€ ì „ì†¡
        BufferedReader keyboard = new BufferedReader(new InputStreamReader(System.in));
        PrintWriter out = new PrintWriter(socket.getOutputStream(), true);

        String input;
        while ((input = keyboard.readLine()) != null) {
            out.println(input);
        }
    }
}


â¸»

âœ… ì‹¤í–‰ ë°©ë²• ìš”ì•½
	1.	ChatServer.java ì‹¤í–‰ (ì„œë²„ ì‹œì‘)
	2.	ChatClient.java ì—¬ëŸ¬ ê°œ ì‹¤í–‰ (í´ë¼ì´ì–¸íŠ¸ ì ‘ì†)
	3.	í´ë¼ì´ì–¸íŠ¸ ê°„ì— ë©”ì‹œì§€ ì…ë ¥í•˜ë©´ ì„œë¡œ ë©”ì‹œì§€ê°€ ê³µìœ ë¨

â¸»

*/
}
